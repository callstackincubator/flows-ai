---
title: 'For each'
description: 'How to use for each flow'
---

```mermaid
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#8232ff',
      'primaryTextColor': '#fff',
      'primaryBorderColor': '#141450',
      'lineColor': '#33CCCC',
      'tertiaryTextColor': "#fff",
      'secondaryColor': '#141450',
      'tertiaryColor': '#141450'
    }
  }
}%%
flowchart LR
    IN("IN") --> forEach
    subgraph forEach [For Each]
        direction LR
        B["Agent 1"]
        C["Agent 2"]
        D["Agent ..."]
        E["Agent N"]
    end
    forEach --> OUT("OUT")
```

Declare agents
```typescript
const githubAgent = agent({
  model: openai('gpt-4'),
  system: 'You are a github crawler...',
  tools: {
    ...toolsForGithub
  }
})

const responseAgent = agent({
  model: openai('gpt-4'),
  system: 'You are responsible for summarizing issues on github...',
})
```

Declare flow
```typescript
const processGithubIssuesFlow = forEach({
  input: [
    {
      agent: 'githubAgent',
      name: 'getIssues',
      input: 'Go to Github and get the top 3 most popular issues and number of open issues.',
    },
    forEach({
      name: 'iterateOverIssues',
      forEach: 'Github issue and total number of open issues',
      input: {
        agent: 'responseAgent',
        input: 'Send an email to the maintainer.',
      },
    })
  ]
})
```

Execute
```typescript
execute(processGithubIssues, {
  agents: {
    githubAgent,
    responseAgent
  }
})
```